<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Robot Comparison - All Parameters</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}html,body{height:100%;font-family:system-ui,sans-serif}
body{overflow-x:auto;overflow-y:hidden;background:#f3f4f6}
#app{min-width:fit-content;height:100%;display:flex;flex-direction:column;background:#f3f4f6}
.grid-row{display:grid;grid-template-columns:200px repeat(var(--cols),minmax(120px,320px));min-width:fit-content}
.cell{display:flex;align-items:center;justify-content:center;padding:8px;border-bottom:1px solid #e5e7eb;min-height:36px;font-size:13px;background:#fff;white-space:nowrap}
.cell-label{background:#1f2937;color:#fff;justify-content:flex-start;padding-left:14px;font-weight:500;font-size:13px;border-bottom:1px solid #374151}
.tag-best{background:#fee2e2;color:#dc2626;padding:2px 8px;border-radius:4px;font-weight:600}
.tag-worst{background:#dcfce7;color:#16a34a;padding:2px 8px;border-radius:4px}
.unit{color:#9ca3af;font-size:11px;margin-left:2px}
.cell-ksp{background:#fefce8;color:#713f12;font-size:12px;line-height:1.4;padding:8px;text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}
.cell-ksp:hover{overflow-x:auto;text-overflow:clip}
.cell-ksp::-webkit-scrollbar{height:4px;background:#fef3c7}
.cell-ksp::-webkit-scrollbar-thumb{background:#f59e0b;border-radius:2px}
.cell-ksp-label{background:#eab308;color:#fff;font-weight:600;font-size:12px;justify-content:flex-start;padding-left:14px;border-bottom:1px solid #ca8a04}
.simple-select{border:none;background:transparent;font-size:13px;text-align:center;text-align-last:center;cursor:pointer;padding:6px 4px;color:#374151;width:100%}.simple-select:focus{outline:none}
.simple-select option{text-align:center}
.brand-select{font-weight:600;color:#1e40af;font-size:14px;text-align:center;text-align-last:center}
.brand-select option{text-align:center}
.cat-select{border:none;background:transparent;font-size:15px;font-weight:600;color:#fff;cursor:pointer;width:100%;text-align:center;padding:10px;height:100%}.cat-select option{color:#1f2937}
.img-cell{padding:0;background:linear-gradient(135deg,#f3f4f6,#e5e7eb);position:relative;overflow:hidden;aspect-ratio:1/1;border-bottom:1px solid #e5e7eb}
.img-cell img{width:100%;height:100%;object-fit:cover;object-position:top center}
.cell.bg-gray-800{display:flex;align-items:stretch;justify-content:center;padding:0;border-bottom:1px solid #374151}
.scroll-area{background:#f3f4f6;overflow-y:auto;flex:1}
.footer{background:#f3f4f6;padding:24px;text-align:center;color:#9ca3af;font-size:12px;font-weight:300}
.loading{display:flex;align-items:center;justify-content:center;height:100%;color:#6b7280;flex-direction:column;gap:16px}
.spinner{width:48px;height:48px;border:4px solid #e5e7eb;border-top-color:#3b82f6;border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.col-control{display:flex;align-items:center;gap:8px;background:#374151;padding:4px 8px;border-radius:6px}
.col-btn{background:#4b5563;color:#fff;border:none;width:28px;height:28px;border-radius:4px;cursor:pointer;font-size:16px;font-weight:bold;display:flex;align-items:center;justify-content:center;transition:background .2s}
.col-btn:hover{background:#6b7280}
.col-btn:disabled{background:#374151;color:#6b7280;cursor:not-allowed}
.col-count{color:#fff;font-weight:600;min-width:60px;text-align:center;font-size:13px}
.param-count{background:#3b82f6;color:#fff;padding:4px 12px;border-radius:6px;font-size:12px;font-weight:600}
</style>
</head>
<body class="bg-gray-100">
<div id="app" class="h-full flex flex-col"><div class="loading"><div class="spinner"></div><span>Loading data...</span></div></div>
<script>
const API='/api',U={'Height':'m','Weight':'kg','Total DOF':'DOF','Navigation Max':'m/s','Payload':'kg','Runtime':'h','Battery':'Wh','Charge Time':'h','Computing':'TOPS','Horizontal Reach':'m','Vertical Reach':'m','Price':'USD','Release Year':''};
let C=[],R=[],cur='',sB=[],sM=[],numCols=4,allParams=[];
const gB=()=>[...new Set(R.map(r=>r.company))];
const gM=b=>R.filter(r=>r.company===b);
const init=()=>{const B=gB();sB=[];sM=[];for(let i=0;i<Math.min(numCols,R.length);i++){sB.push(R[i].company);sM.push(R[i].id)}while(sB.length<numCols){sB.push('');sM.push(null)}};
const fv=(k,v)=>{if(v==null||v==='')return'‚Äì';if(typeof v!=='number')return v;const u=U[k];return u?`${v}<span class="unit">${u}</span>`:v};
const fC=async()=>{const r=await fetch(`${API}/categories`);C=await r.json();if(C.length)cur=C[0].id};
const fR=async c=>{document.getElementById('app').innerHTML=`<div class="loading"><div class="spinner"></div><span>Loading ${c} data...</span></div>`;try{const r=await fetch(`${API}/robots/${c}`);const data=await r.json();R=data.robots;const props=data.properties||[];allParams=props.filter(p=>p.name!=='Model'&&p.name!=='Company'&&p.name!=='Image'&&!p.name.startsWith('KSP-')).map(p=>p.name);console.log(`‚úÖ Âä†ËΩΩ‰∫Ü ${allParams.length} ‰∏™ÂèÇÊï∞:`,allParams);init();render()}catch(e){document.getElementById('app').innerHTML=`<div class="loading" style="color:#dc2626">Loading failed: ${e.message}<br><br><button onclick="location.reload()" style="padding:8px 16px;background:#3b82f6;color:#fff;border:none;border-radius:4px;cursor:pointer">Retry</button></div>`}};
const changeColNum=(delta)=>{numCols=Math.max(2,Math.min(10,numCols+delta));init();render()};
const render=()=>{document.documentElement.style.setProperty('--cols',numCols);const cat=C.find(c=>c.id===cur),B=gB(),sel=sM.map(id=>R.find(r=>r.id===id)||null);const hasKSP=sel.some(r=>r&&r.ksp&&r.ksp.length>0);
document.getElementById('app').innerHTML=` <div class="flex-shrink-0 bg-white shadow-sm" style="z-index:100"> <div class="px-4 py-3 border-b bg-gray-900 text-white flex items-center justify-between"> <h1 class="text-lg font-bold">ü§ñ Robot Comparison - All Parameters</h1> <div class="flex items-center gap-4"> <div class="param-count">üìä ${allParams.length} Parameters</div> <div class="col-control"> <button class="col-btn" onclick="changeColNum(-1)" ${numCols<=2?'disabled':''}>‚àí</button> <span class="col-count">${numCols} Cols</span> <button class="col-btn" onclick="changeColNum(1)" ${numCols>=10?'disabled':''}>+</button> </div> <span class="text-xs text-gray-400">Real-time Sync</span> </div> </div> <div class="grid-row"><div class="cell bg-gray-800"><select onchange="switchCat(this.value)" class="cat-select">${C.map(c=>`<option value="${c.id}" ${cur===c.id?'selected':''}>${c.icon} ${c.name}</option>`).join('')}</select></div>${sel.map((r,i)=>`<div class="img-cell flex items-center justify-center" style="${i<numCols-1?'border-right:2px solid #fff':''}">${r?.image?`<img src="${r.image}" onerror="this.outerHTML='<span class=\\'text-6xl\\'>${cat?.icon||'ü§ñ'}</span>'">`:`<span class="text-6xl">${cat?.icon||'ü§ñ'}</span>`}</div>`).join('')}</div> <div class="grid-row"><div class="cell cell-label">Brand</div>${sel.map((_,i)=>`<div class="cell bg-gray-50"><select onchange="setBrand(${i},this.value)" class="simple-select brand-select">${B.map(b=>`<option value="${b}" ${sB[i]===b?'selected':''}>${b}</option>`).join('')}</select></div>`).join('')}</div> <div class="grid-row" style="border-bottom:3px solid #d1d5db"><div class="cell cell-label">Model</div>${sel.map((_,i)=>{const f=gM(sB[i]);return`<div class="cell bg-white"><select onchange="setModel(${i},this.value)" class="simple-select">${f.map(m=>`<option value="${m.id}" ${sM[i]===m.id?'selected':''}>${m.model}</option>`).join('')}</select></div>`}).join('')}</div> </div> <div class="scroll-area"> ${hasKSP?`<div class="grid-row" style="background:#fef3c7;border-bottom:2px solid #f59e0b"><div class="cell cell-ksp-label">‚≠ê KEY SELLING POINTS</div>${sel.map(()=>`<div class="cell" style="background:#fef3c7"></div>`).join('')}</div>
${[0,1,2,3,4].map(x=>`<div class="grid-row"><div class="cell cell-ksp-label">KSP-${x+1}</div>${sel.map(r=>`<div class="cell cell-ksp">${r?.ksp?.[x]||'‚Äì'}</div>`).join('')}</div>`).join('')}
<div style="height:16px;background:#f3f4f6"></div>`:``} <div class="grid-row" style="background:#e5e7eb;border-bottom:2px solid #9ca3af"><div class="cell cell-label" style="background:#374151">üìã ALL PARAMETERS (${allParams.length})</div>${sel.map(()=>`<div class="cell" style="background:#e5e7eb"></div>`).join('')}</div> ${allParams.map(k=>`<div class="grid-row"><div class="cell cell-label">${k}</div>${sel.map(r=>`<div class="cell">${r?fv(k,r.specs[k]):'‚Äì'}</div>`).join('')}</div>`).join('')} <div class="footer">¬© 2026 Proper Design Consultancy | Powered by Notion API</div> </div> `};
const switchCat=c=>{cur=c;fR(c)};const setBrand=(i,b)=>{sB[i]=b;const m=gM(b);sM[i]=m[0]?.id||null;render()};const setModel=(i,id)=>{sM[i]=id;render()};
window.changeColNum=changeColNum;
(async()=>{await fC();if(cur)await fR(cur)})();
</script>
</body>
</html>
